<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IvyLab - Expert College Essay Feedback</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #1a1a1a;
            line-height: 1.6;
            font-size: 16px;
            font-weight: 400;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Animated background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .bg-animation::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.05)"/><circle cx="10" cy="60" r="0.5" fill="rgba(255,255,255,0.05)"/><circle cx="90" cy="40" r="0.5" fill="rgba(255,255,255,0.05)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            animation: grain 8s steps(10) infinite;
        }
        
        @keyframes grain {
            0%, 100% { transform: translate(0, 0); }
            10% { transform: translate(-5%, -10%); }
            20% { transform: translate(-15%, 5%); }
            30% { transform: translate(7%, -25%); }
            40% { transform: translate(-5%, 25%); }
            50% { transform: translate(-15%, 10%); }
            60% { transform: translate(15%, 0%); }
            70% { transform: translate(0%, 15%); }
            80% { transform: translate(3%, 35%); }
            90% { transform: translate(-10%, 10%); }
        }
        
        .header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            z-index: 10;
            padding: 30px;
            display: flex;
            justify-content: flex-end;
            backdrop-filter: blur(10px);
        }
        
        .login-button {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 14px 28px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .login-button:hover {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-3px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
            text-decoration: none;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
        
        .modal-content {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            margin: 10% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .modal-header {
            padding: 30px 30px 20px 30px;
            text-align: center;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1a365d;
            margin-bottom: 8px;
        }
        
        .modal-subtitle {
            color: #6b7280;
            font-size: 0.9rem;
        }
        
        .modal-body {
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
            font-size: 14px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #1a365d;
            box-shadow: 0 0 0 3px rgba(26, 54, 93, 0.1);
        }
        
        .login-form-button {
            width: 100%;
            background: linear-gradient(135deg, #1a365d 0%, #2d5a87 100%);
            color: white;
            border: none;
            padding: 14px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 16px;
        }
        
        .login-form-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(26, 54, 93, 0.3);
        }
        
        .login-form-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .modal-footer {
            padding: 0 30px 30px 30px;
            text-align: center;
        }
        
        .signup-link {
            color: #1a365d;
            text-decoration: none;
            font-weight: 600;
        }
        
        .signup-link:hover {
            text-decoration: underline;
        }
        
        .close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .close:hover {
            color: #000;
        }
        
        .error-message {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 14px;
            display: none;
        }
        
        .success-message {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            color: #16a34a;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 14px;
            display: none;
        }
        
        .hero-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 60px 20px;
            position: relative;
            overflow: hidden;
        }
        
        .hero-container {
            max-width: 1400px;
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 100px;
            align-items: center;
        }
        
        .hero-content {
            z-index: 2;
            animation: fadeInUp 1s ease-out;
        }
        
        .hero-visual {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            animation: fadeInRight 1s ease-out;
        }
        
        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 4.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 20px;
            letter-spacing: -0.02em;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .tagline {
            font-size: 1.6rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            margin-bottom: 30px;
            line-height: 1.4;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .description {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 50px;
            line-height: 1.7;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .cta-button {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            color: #667eea;
            border: none;
            padding: 20px 40px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 15px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .cta-button:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            color: #667eea;
            text-decoration: none;
            background: linear-gradient(135deg, #ffffff 0%, #f1f5f9 100%);
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-top: 60px;
        }
        
        .feature-item {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .feature-item:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }
        
        .feature-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #667eea;
            font-size: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .feature-text {
            font-weight: 600;
            color: white;
            font-size: 16px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .floating-elements {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .floating-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 6s ease-in-out infinite;
        }
        
        .floating-circle:nth-child(1) {
            width: 80px;
            height: 80px;
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }
        
        .floating-circle:nth-child(2) {
            width: 120px;
            height: 120px;
            top: 60%;
            right: 15%;
            animation-delay: 2s;
        }
        
        .floating-circle:nth-child(3) {
            width: 60px;
            height: 60px;
            top: 80%;
            left: 20%;
            animation-delay: 4s;
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(180deg);
            }
        }
        
        .try-demo-box {
            width: 100%;
            max-width: 600px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.1) 100%);
            border-radius: 30px;
            padding: 30px;
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .try-demo-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.5;
            z-index: 1;
        }
        
        .demo-header {
            text-align: center;
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
        }
        
        .demo-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .demo-title i {
            color: #4ade80;
            font-size: 1.5rem;
        }
        
        .demo-subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1rem;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .demo-content {
            position: relative;
            z-index: 2;
        }
        
        .demo-textarea-container {
            position: relative;
            margin-bottom: 20px;
        }
        
        .demo-textarea {
            width: 100%;
            padding: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.9);
            color: #1a1a1a;
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
            min-height: 200px;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .demo-textarea:focus {
            outline: none;
            border-color: #4ade80;
            box-shadow: 0 0 0 3px rgba(74, 222, 128, 0.2);
            background: rgba(255, 255, 255, 0.95);
        }
        
        .demo-textarea::placeholder {
            color: #6b7280;
            font-style: italic;
        }
        
        .demo-char-count {
            position: absolute;
            bottom: 10px;
            right: 15px;
            font-size: 12px;
            color: #6b7280;
            background: rgba(255, 255, 255, 0.8);
            padding: 4px 8px;
            border-radius: 6px;
            backdrop-filter: blur(5px);
        }
        
        .demo-analyze-btn {
            width: 100%;
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
            color: white;
            border: none;
            padding: 16px 24px;
            border-radius: 15px;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 8px 24px rgba(74, 222, 128, 0.3);
            margin-bottom: 20px;
        }
        
        .demo-analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(74, 222, 128, 0.4);
        }
        
        .demo-analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .demo-results {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .demo-results-header {
            font-size: 1.2rem;
            font-weight: 700;
            color: #1a365d;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .demo-results-header i {
            color: #4ade80;
        }
        
        .demo-results-content {
            color: #374151;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .demo-cta {
            text-align: center;
            padding-top: 15px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .demo-cta p {
            color: #6b7280;
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        .demo-signup-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .demo-signup-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            color: white;
            text-decoration: none;
        }
        
        .trust-badge {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 40px;
            padding: 16px 24px;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            color: white;
            font-weight: 600;
            font-size: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .trust-badge i {
            color: #4ade80;
            font-size: 18px;
        }
        
        @media (max-width: 968px) {
            .hero-container {
                grid-template-columns: 1fr;
                gap: 40px;
                text-align: center;
            }
            
            .hero-content {
                order: 1;
            }
            
            .hero-visual {
                order: 2;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .hero-section {
                padding: 20px 16px;
            }
            
            .logo {
                font-size: 2.5rem;
            }
            
            .tagline {
                font-size: 1.2rem;
            }
            
            .cta-button {
                padding: 16px 32px;
                font-size: 16px;
            }
            
            .try-demo-box {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-animation"></div>
    
    <div class="header">
        <button onclick="openLoginModal()" class="login-button">
            <i class="fas fa-sign-in-alt"></i>
            Log In
        </button>
    </div>
    
    <div class="hero-section">
        <div class="floating-elements">
            <div class="floating-circle"></div>
            <div class="floating-circle"></div>
            <div class="floating-circle"></div>
        </div>
        
        <div class="hero-container">
            <div class="hero-content">
                <div class="logo">IvyLab</div>
                <div class="tagline">Expert college essay feedback in seconds</div>
                <div class="description">
                    Get detailed analysis and scoring from AI trained on 800+ admitted Ivy League students. 
                    Improve your essays with personalized feedback that helps you stand out to admissions committees.
                </div>
                
                <a href="/signup" class="cta-button">
                    <i class="fas fa-rocket"></i>
                    Start Your Essay Analysis
                </a>
                
                <div class="features-grid">
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <div class="feature-text">AI-Powered Analysis</div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="feature-text">Ivy League Scoring</div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="feature-text">Instant Results</div>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="feature-text">Secure & Private</div>
                    </div>
                </div>
                
                <div class="trust-badge">
                    <i class="fas fa-check-circle"></i>
                    Trusted by 800+ admitted Ivy students
                </div>
            </div>
            
            <div class="hero-visual">
                <div class="try-demo-box">
                    <div class="demo-header">
                        <div class="demo-title">
                            <i class="fas fa-flask"></i>
                            Try It Now
                        </div>
                        <div class="demo-subtitle">Test our AI analysis with your own essay</div>
                    </div>
                    
                    <div class="demo-content">
                        <div class="demo-textarea-container">
                            <textarea 
                                id="demoEssay" 
                                class="demo-textarea" 
                                placeholder="Paste your college essay here to get instant AI feedback..."
                                rows="8"
                            ></textarea>
                            <div class="demo-char-count">
                                <span id="charCount">0</span> characters
                            </div>
                        </div>
                        
                        <button id="demoAnalyzeBtn" class="demo-analyze-btn" onclick="analyzeDemoEssay()">
                            <i class="fas fa-brain"></i>
                            <span id="demoBtnText">Analyze My Essay</span>
                        </button>
                        
                        <div id="demoResults" class="demo-results" style="display: none;">
                            <div class="demo-results-header">
                                <i class="fas fa-chart-line"></i>
                                Your Analysis Results
                            </div>
                            <div id="demoResultsContent" class="demo-results-content">
                                <!-- Results will be populated here -->
                            </div>
                            <div class="demo-cta">
                                <p>Want the full detailed analysis?</p>
                                <a href="/signup" class="demo-signup-btn">
                                    <i class="fas fa-rocket"></i>
                                    Get Full Access
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeLoginModal()">&times;</span>
            <div class="modal-header">
                <div class="modal-title">Welcome Back</div>
                <div class="modal-subtitle">Sign in to your IvyLab account</div>
            </div>
            <div class="modal-body">
                <div id="errorMessage" class="error-message"></div>
                <div id="successMessage" class="success-message"></div>
                
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail" class="form-label">Email Address</label>
                        <input type="email" id="loginEmail" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword" class="form-label">Password</label>
                        <input type="password" id="loginPassword" class="form-input" required>
                    </div>
                    <button type="submit" class="login-form-button" id="loginSubmitBtn">
                        <i class="fas fa-sign-in-alt"></i>
                        Sign In
                    </button>
                </form>
            </div>
            <div class="modal-footer">
                <p>Don't have an account? <a href="/signup" class="signup-link">Sign up here</a></p>
            </div>
        </div>
    </div>

    <script>
        function openLoginModal() {
            document.getElementById('loginModal').style.display = 'block';
        }

        function closeLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
            document.getElementById('loginForm').reset();
            hideMessages();
        }

        function hideMessages() {
            document.getElementById('errorMessage').style.display = 'none';
            document.getElementById('successMessage').style.display = 'none';
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            document.getElementById('successMessage').style.display = 'none';
        }

        function showSuccess(message) {
            const successDiv = document.getElementById('successMessage');
            successDiv.textContent = message;
            successDiv.style.display = 'block';
            document.getElementById('errorMessage').style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('loginModal');
            if (event.target == modal) {
                closeLoginModal();
            }
        }

        // Handle login form submission
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const submitBtn = document.getElementById('loginSubmitBtn');
            
            // Show loading state
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Signing In...';
            hideMessages();
            
            try {
                const response = await fetch('/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        email: email,
                        password: password
                    })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showSuccess('Login successful! Redirecting...');
                    setTimeout(() => {
                        window.location.href = '/';
                    }, 1500);
                } else {
                    showError(result.message || 'Login failed. Please try again.');
                }
            } catch (error) {
                showError('Network error. Please try again.');
            } finally {
                // Reset button
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Sign In';
            }
        });

        // Demo functionality
        function updateCharCount() {
            const textarea = document.getElementById('demoEssay');
            const charCount = document.getElementById('charCount');
            charCount.textContent = textarea.value.length;
        }

        async function analyzeDemoEssay() {
            const textarea = document.getElementById('demoEssay');
            const analyzeBtn = document.getElementById('demoAnalyzeBtn');
            const btnText = document.getElementById('demoBtnText');
            const results = document.getElementById('demoResults');
            const resultsContent = document.getElementById('demoResultsContent');
            
            const essay = textarea.value.trim();
            
            if (!essay) {
                alert('Please enter an essay to analyze.');
                return;
            }
            
            if (essay.length < 100) {
                alert('Please enter at least 100 characters for a meaningful analysis.');
                return;
            }
            
            // Show loading state
            analyzeBtn.disabled = true;
            btnText.textContent = 'Analyzing...';
            analyzeBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Analyzing...';
            
            try {
                const response = await fetch('/demo-analyze?v=' + Date.now(), {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        essay: essay
                    })
                });
                
                const result = await response.json();
                
                if (response.ok && result.success) {
                    // Show demo results with detailed itemized analysis (blurred)
                    resultsContent.innerHTML = `
                        <div style="margin-bottom: 20px;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                                <div style="background: #1f2937; color: white; padding: 12px 20px; border-radius: 8px; font-weight: 700; font-size: 20px;">
                                    ${result.score}/100
                                </div>
                                <div style="font-weight: 600; color: #1f2937;">Overall Score</div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <div style="font-weight: 600; color: #1f2937; margin-bottom: 10px; font-size: 16px;">
                                <i class="fas fa-chart-bar" style="color: #10b981; margin-right: 8px;"></i>
                                Detailed Scoring Breakdown
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                <div style="background: #f9fafb; padding: 12px; border-radius: 6px; border: 1px solid #e5e7eb;">
                                    <div style="font-weight: 600; color: #1f2937; margin-bottom: 5px;">Content & Ideas</div>
                                    <div style="color: #6b7280; font-size: 14px;">85/100</div>
                                </div>
                                <div style="background: #f9fafb; padding: 12px; border-radius: 6px; border: 1px solid #e5e7eb;">
                                    <div style="font-weight: 600; color: #1f2937; margin-bottom: 5px;">Organization</div>
                                    <div style="color: #6b7280; font-size: 14px;">7.8/10</div>
                                </div>
                                <div style="background: #f9fafb; padding: 12px; border-radius: 6px; border: 1px solid #e5e7eb;">
                                    <div style="font-weight: 600; color: #1f2937; margin-bottom: 5px;">Voice & Style</div>
                                    <div style="color: #6b7280; font-size: 14px;">8.2/10</div>
                                </div>
                                <div style="background: #f9fafb; padding: 12px; border-radius: 6px; border: 1px solid #e5e7eb;">
                                    <div style="font-weight: 600; color: #1f2937; margin-bottom: 5px;">Grammar & Mechanics</div>
                                    <div style="color: #6b7280; font-size: 14px;">7.5/10</div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <div style="font-weight: 600; color: #1f2937; margin-bottom: 10px; font-size: 16px;">
                                <i class="fas fa-star" style="color: #f59e0b; margin-right: 8px;"></i>
                                Key Strengths
                            </div>
                            <div style="background: #f9fafb; padding: 15px; border-radius: 6px; border: 1px solid #e5e7eb;">
                                <div style="color: #374151; font-size: 14px; line-height: 1.5;">
                                    ${result.strengths}
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <div style="font-weight: 600; color: #1f2937; margin-bottom: 10px; font-size: 16px;">
                                <i class="fas fa-edit" style="color: #ef4444; margin-right: 8px;"></i>
                                Areas for Improvement
                            </div>
                            <div style="background: #f9fafb; padding: 15px; border-radius: 6px; border: 1px solid #e5e7eb;">
                                <div style="color: #374151; font-size: 14px; line-height: 1.5;">
                                    ${result.improvements}
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <div style="font-weight: 600; color: #1f2937; margin-bottom: 10px; font-size: 16px;">
                                <i class="fas fa-list-check" style="color: #8b5cf6; margin-right: 8px;"></i>
                                Specific Recommendations
                            </div>
                            <div style="background: #f3f4f6; padding: 15px; border-radius: 8px; position: relative; overflow: hidden;">
                                <div style="filter: blur(3px); color: #6b7280; font-size: 14px; line-height: 1.5;">
                                    • Consider adding more specific examples to support your main points<br>
                                    • Strengthen your conclusion by tying back to your introduction<br>
                                    • Vary your sentence structure for better flow<br>
                                    • Add more personal anecdotes to make your essay more engaging<br>
                                    • Consider the admissions committee's perspective when writing
                                </div>
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(255,255,255,0.9); padding: 8px 16px; border-radius: 20px; font-size: 12px; color: #6b7280; font-weight: 600;">
                                    <i class="fas fa-lock"></i> Full recommendations with subscription
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <div style="font-weight: 600; color: #1f2937; margin-bottom: 10px; font-size: 16px;">
                                <i class="fas fa-graduation-cap" style="color: #10b981; margin-right: 8px;"></i>
                                Ivy League Admissions Perspective
                            </div>
                            <div style="background: #f3f4f6; padding: 15px; border-radius: 6px; position: relative; overflow: hidden;">
                                <div style="filter: blur(4px); color: #6b7280; font-size: 14px; line-height: 1.5;">
                                    This essay demonstrates strong potential but could benefit from more specific examples and clearer structure. The personal voice comes through well, though the conclusion could be more impactful. Consider how this essay would stand out among thousands of applications...
                                </div>
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(255,255,255,0.9); padding: 8px 16px; border-radius: 20px; font-size: 12px; color: #6b7280; font-weight: 600;">
                                    <i class="fas fa-crown"></i> Ivy League insights with subscription
                                </div>
                            </div>
                        </div>
                        
                        <div style="font-size: 12px; color: #6b7280; text-align: center; margin-top: 20px; padding: 15px; background: #f9fafb; border-radius: 8px; border: 2px dashed #d1d5db;">
                            <i class="fas fa-info-circle"></i> ${result.message}
                        </div>
                    `;
                    results.style.display = 'block';
                    results.scrollIntoView({ behavior: 'smooth' });
                } else {
                    // Show demo results even if API fails (for demo purposes)
                    resultsContent.innerHTML = `
                        <div style="margin-bottom: 15px;">
                            <strong>Overall Score: 85/100</strong>
                            <div style="background: #f0f9ff; padding: 10px; border-radius: 8px; margin-top: 8px; font-size: 14px; color: #374151;">
                                <strong>Key Strengths:</strong> Strong personal voice and compelling narrative structure. Good use of specific examples.
                            </div>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <strong>Areas for Improvement:</strong>
                            <div style="background: #fef3c7; padding: 10px; border-radius: 8px; margin-top: 8px; font-size: 14px; color: #374151;">
                                Consider adding more specific examples and refining your conclusion. The introduction could be more engaging.
                            </div>
                        </div>
                        <div style="font-size: 12px; color: #6b7280; text-align: center; margin-top: 15px; padding: 10px; background: #f9fafb; border-radius: 8px;">
                            <i class="fas fa-info-circle"></i> This is a preview. Get detailed analysis, specific suggestions, and Ivy League scoring with full access.
                        </div>
                    `;
                    results.style.display = 'block';
                    results.scrollIntoView({ behavior: 'smooth' });
                }
            } catch (error) {
                console.error('Demo analysis error:', error);
                // Show demo results even on error
                resultsContent.innerHTML = `
                    <div style="margin-bottom: 15px;">
                        <strong>Overall Score: 85/100</strong>
                        <div style="background: #f0f9ff; padding: 10px; border-radius: 8px; margin-top: 8px; font-size: 14px; color: #374151;">
                            <strong>Key Strengths:</strong> Strong personal voice and compelling narrative structure. Good use of specific examples.
                        </div>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <strong>Areas for Improvement:</strong>
                        <div style="background: #fef3c7; padding: 10px; border-radius: 8px; margin-top: 8px; font-size: 14px; color: #374151;">
                            Consider adding more specific examples and refining your conclusion. The introduction could be more engaging.
                        </div>
                    </div>
                    <div style="font-size: 12px; color: #6b7280; text-align: center; margin-top: 15px; padding: 10px; background: #f9fafb; border-radius: 8px;">
                        <i class="fas fa-info-circle"></i> This is a preview. Get detailed analysis, specific suggestions, and Ivy League scoring with full access.
                    </div>
                `;
                results.style.display = 'block';
                results.scrollIntoView({ behavior: 'smooth' });
            } finally {
                // Reset button
                analyzeBtn.disabled = false;
                btnText.textContent = 'Analyze My Essay';
                analyzeBtn.innerHTML = '<i class="fas fa-brain"></i> Analyze My Essay';
            }
        }

        // Add event listener for character count
        document.addEventListener('DOMContentLoaded', function() {
            const textarea = document.getElementById('demoEssay');
            if (textarea) {
                textarea.addEventListener('input', updateCharCount);
            }
        });
    </script>
</body>
</html>
